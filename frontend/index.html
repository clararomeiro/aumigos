<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Aumigos</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .two-columns {
            display: flex;
            gap: 30px;
        }
        .col {
            flex: 1;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<header>
    <h1>Aumigos</h1>
</header>

<nav>
    <button onclick="showTab('home')">Início</button>
    <button onclick="showTab('tutorTab')">Tutor</button>
    <button onclick="showTab('listaVeterinarios')">Veterinários</button>
    <button onclick="showTab('listaConsultas')">Consultas</button>
    <button onclick="showTab('realizarPagamento')">Realizar Pagamento</button>
    <button onclick="showTab('agendarConsulta')">Agendar Consulta</button>
</nav>

<main>
    <section id="home" class="tab visible">
        <h2>Seja bem-vindo(a)!</h2>
        <p>Escolha uma opção no menu acima.</p>
    </section>

    <section id="tutorTab" class="tab">
        <h2>Tutor</h2>

        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Gerenciar Tutores</h2>
            <button onclick="abrirModal('modalCadTutor')" style="background-color: #28a745; margin:0;">
                + Novo Tutor
            </button>
        </div>
        <hr>

        <div id="modalCadTutor" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="fecharModal('modalCadTutor')">&times;</span>
                <h3>Cadastrar Novo Tutor</h3>
                
                <label>Nome:</label>
                <input type="text" id="tutorNome" style="width: 100%">

                <label>CPF:</label>
                <input type="text" id="tutorCpf" style="width: 100%">

                <label>Endereço:</label>
                <input type="text" id="tutorEndereco" style="width: 100%">

                <label>Email:</label>
                <input type="text" id="tutorEmail" style="width: 100%">

                <button onclick="cadastrarTutor()">Salvar</button>
                <div id="tutorResultado"></div>
            </div>
        </div>

        <div class="two-columns">
            <div class="col">
                <h3>Buscar Tutor</h3>

                <label>CPF do tutor:</label>
                <input type="text" id="buscarTutorCpf">
                <button onclick="buscarTutor()">Buscar</button>

                <div id="buscarTutorResultado"></div>

                <div id="animaisContainer" class="hidden">
                    <h3>Animais do Tutor</h3>

                    <form id="listaAnimaisForm"></form>

                    <button onclick="deletarAnimaisSelecionados()" style="margin-top:10px">
                        Deletar Animais Selecionados
                    </button>

                    <div id="delAnimaisResultado"></div>
                </div>
            </div>

            <div class="col hidden" id="cadAnimalContainer">
                <h3>Cadastrar Animal para este Tutor</h3>

                <label>ID do Tutor (automático):</label>
                <input type="text" id="aniTutor" readonly style="background:#eee">

                <label>Nome:</label>
                <input type="text" id="aniNome">

                <label>Espécie:</label>
                <input type="text" id="aniEspecie">

                <label>Raça:</label>
                <input type="text" id="aniRaca">

                <label>Data de Nascimento:</label>
                <input type="date" id="aniNascimento">

                <label>Sexo:</label>
                <select id="aniSexo" style="width: 266px; padding: 7px; margin-top: 5px;">
                    <option value="M">Macho</option>
                    <option value="F">Fêmea</option>
                </select>

                <label>Peso (kg):</label>
                <input type="number" step="0.1" id="aniPeso">

                <label>Plano de Saúde (ID opcional):</label>
                <input type="number" id="aniPlano" placeholder="Deixe vazio se não tiver">

                <label>Observações:</label>
                <input type="text" id="aniObs">

                <button onclick="cadastrarAnimal()">Cadastrar Animal</button>
                <div id="aniResultado"></div>
            </div>

        </div>
    </section>

    <section id="listaVeterinarios" class="tab">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Veterinários Cadastrados</h2>
            <button onclick="abrirModal('modalCadVet')" style="background-color: #28a745; margin:0;">
                + Novo Veterinário
            </button>
        </div>
        
        <button onclick="carregarVeterinarios()">Atualizar Lista</button>
        <br><br>

        <div id="modalCadVet" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="fecharModal('modalCadVet')">&times;</span>
                <h3>Cadastrar Veterinário</h3>

                <label>Nome:</label>
                <input type="text" id="vetNome" style="width: 100%">

                <label>CPF:</label>
                <input type="text" id="vetCpf" style="width: 100%">

                <label>Email:</label>
                <input type="text" id="vetEmail" style="width: 100%">

                <button onclick="cadastrarVeterinario()">Salvar</button>
                <div id="vetResultado"></div>
            </div>
        </div>

        <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; text-align: left;">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>CPF</th>
                    <th>Email</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="tabelaVeterinariosCorpo">
                </tbody>
        </table>
    </section>

    <section id="listaConsultas" class="tab">
        <h2>Consultas Agendadas</h2>
        <button onclick="carregarConsultas()">Atualizar Lista</button>
        <br><br>
        <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; text-align: left;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Data</th>
                    <th>Animal</th>
                    <th>Veterinário</th>
                    <th>Pagamento</th>
                </tr>
            </thead>
            <tbody id="tabelaConsultasCorpo">
                </tbody>
        </table>
    </section>

    <!-- ================== REALIZAR PAGAMENTO ================== -->
    <section id="realizarPagamento" class="tab">
        <h2>Realizar Pagamento de Consulta</h2>

        <label>Selecione a Consulta Pendente:</label>
        <select id="pagConsultaSelect" style="width: 300px; padding: 7px; margin-top: 5px;">
            <option value="">Carregando...</option>
        </select>

        <label>Tipo de Pagamento:</label>
        <select id="pagTipo" style="width: 300px; padding: 7px;">
            <option value="Credito">Crédito</option>
            <option value="Debito">Débito</option>
            <option value="Plano">Plano de Saúde</option>
        </select>

        <label>Valor (R$):</label>
        <input type="number" id="pagValor" step="0.01">

        <button onclick="realizarPagamento()" style="background: #28a745;">Confirmar Pagamento</button>
        <div id="pagamentoResultado"></div>
    </section>

    <!-- ================== AGENDAR CONSULTA ================== -->
    <section id="agendarConsulta" class="tab">
        <h2>Agendar Consulta</h2>

        <label>CPF do Tutor:</label>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="consTutorCpf" placeholder="Digite o CPF do tutor">
            <button onclick="buscarAnimaisDoTutor()" style="margin-top: 5px;">Buscar Animais</button>
        </div>
        <div id="msgBuscaTutor" style="font-size: 0.9em; color: gray; margin-bottom: 10px;"></div>

        <label>Selecione o Animal:</label>
        <select id="consAnimalSelect" disabled style="width: 266px; padding: 7px; margin-top: 5px;">
            <option value="">Aguardando busca do tutor...</option>
        </select>

        <label>Selecione o Veterinário:</label>
        <select id="consVet" style="width: 266px; padding: 7px; margin-top: 5px;">
            <option value="">Carregando veterinários...</option>
        </select>

        <label>Data:</label>
        <input type="date" id="consData">

        <br><br>
        <button onclick="agendarConsulta()" style="width: 266px; background-color: #28a745;">Confirmar Agendamento</button>
        <div id="consultaResultado"></div>
    </section>

</main>

<script src="script.js"></script>
</body>
</html>